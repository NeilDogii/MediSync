<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Disease Prediction Chatbot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            height: calc(100vh - 40px);
        }

        .sidebar {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .logo {
            text-align: center;
            margin-bottom: 24px;
        }

        .logo-icon {
            font-size: 48px;
            margin-bottom: 8px;
        }

        .logo h1 {
            font-size: 20px;
            color: #667eea;
            margin-bottom: 4px;
        }

        .logo p {
            font-size: 12px;
            color: #888;
        }

        .patient-form {
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .symptoms-list {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }

        .symptoms-list h3 {
            font-size: 14px;
            color: #333;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .symptom-tag {
            display: inline-block;
            background: #f0f4ff;
            color: #667eea;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            margin: 4px;
        }

        .action-buttons {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f4ff;
            color: #667eea;
        }

        .btn-secondary:hover {
            background: #e1e8ff;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .chat-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-header h2 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .user-avatar {
            background: #667eea;
            color: white;
        }

        .bot-avatar {
            background: #f0f4ff;
        }

        .message-content {
            flex: 1;
            background: white;
            padding: 14px 16px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .message.user .message-content {
            background: #667eea;
            color: white;
        }

        .message-time {
            font-size: 11px;
            color: #888;
            margin-top: 6px;
        }

        .message.user .message-time {
            color: rgba(255, 255, 255, 0.8);
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .chat-input-container {
            padding: 20px 24px;
            background: white;
            border-top: 2px solid #f0f0f0;
        }

        .quick-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .quick-action {
            padding: 6px 12px;
            background: #f0f4ff;
            color: #667eea;
            border: none;
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-action:hover {
            background: #667eea;
            color: white;
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
        }

        .chat-input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 24px;
            font-size: 14px;
            resize: none;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .send-btn {
            width: 48px;
            height: 48px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .disclaimer {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
            font-size: 12px;
            color: #856404;
        }

        .disclaimer strong {
            display: block;
            margin-bottom: 4px;
        }

        .analysis-card {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 16px;
            margin: 12px 0;
            border-radius: 8px;
        }

        .analysis-card h4 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .analysis-card p {
            font-size: 13px;
            line-height: 1.6;
            color: #555;
        }

        @media (max-width: 968px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
            }

            .sidebar {
                max-height: none;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <div class="logo-icon">‚öïÔ∏è</div>
                <h1>MediChat AI</h1>
                <p>v2.0 | Powered by Medisync</p>
            </div>

            <div class="disclaimer">
                <strong>‚ö†Ô∏è Important Disclaimer</strong>
                This tool provides health information only. Always consult a qualified healthcare provider for medical advice.
            </div>

            <div class="patient-form">
                <h3 style="margin-bottom: 16px; font-size: 16px; color: #333;">Patient Information</h3>
                
                <div class="form-group">
                    <label>Age</label>
                    <input type="number" id="age" placeholder="Enter age" min="0" max="120">
                </div>

                <div class="form-group">
                    <label>Gender</label>
                    <select id="gender">
                        <option value="">Select gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Existing Conditions</label>
                    <input type="text" id="conditions" placeholder="e.g., Diabetes, Hypertension">
                </div>

                <div class="form-group">
                    <label>Current Medications</label>
                    <input type="text" id="medications" placeholder="e.g., Aspirin, Metformin">
                </div>

                <div class="form-group">
                    <label>Known Allergies</label>
                    <input type="text" id="allergies" placeholder="e.g., Penicillin, Peanuts">
                </div>
            </div>

            <div class="symptoms-list">
                <h3>
                    <span>üìã</span>
                    Detected Symptoms
                </h3>
                <div id="symptomsList">
                    <p style="font-size: 12px; color: #888; font-style: italic;">No symptoms detected yet</p>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="analyzeBtn" disabled>
                    üîç Analyze Symptoms
                </button>
                <button class="btn btn-secondary" id="saveBtn" disabled>
                    üíæ Save Report
                </button>
                <button class="btn btn-secondary" id="clearBtn">
                    üîÑ Clear Chat
                </button>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat-header">
                <h2>
                    <span class="status-indicator"></span>
                    Medical Consultation
                </h2>
                <div style="font-size: 12px; opacity: 0.9;">
                    AI-Powered Health Assistant
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-avatar bot-avatar">ü§ñ</div>
                    <div class="message-content">
                        <p>Hello! I'm your AI medical assistant. I'm here to help you understand your symptoms and provide health information.</p>
                        <p style="margin-top: 8px;">Please describe your main symptoms or concerns, and I'll ask follow-up questions to better understand your situation.</p>
                        <div class="message-time" id="initialTime"></div>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="quick-actions">
                    <button class="quick-action" onclick="insertQuickMessage('I have a headache')">üíä Headache</button>
                    <button class="quick-action" onclick="insertQuickMessage('I have a fever')">üå°Ô∏è Fever</button>
                    <button class="quick-action" onclick="insertQuickMessage('I have a cough')">üò∑ Cough</button>
                    <button class="quick-action" onclick="insertQuickMessage('I feel tired')">üò¥ Fatigue</button>
                </div>

                <div class="input-wrapper">
                    <textarea 
                        id="messageInput" 
                        class="chat-input" 
                        placeholder="Describe your symptoms..." 
                        rows="1"
                    ></textarea>
                    <button class="send-btn" id="sendBtn">
                        ‚û§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const commonSymptoms = {
            respiratory: ["cough", "shortness of breath", "wheezing", "chest pain", "sore throat", "runny nose", "congestion"],
            digestive: ["nausea", "vomiting", "diarrhea", "constipation", "abdominal pain", "bloating", "loss of appetite", "stomach"],
            neurological: ["headache", "dizziness", "confusion", "numbness", "tingling", "weakness", "seizures", "migraine"],
            musculoskeletal: ["joint pain", "muscle pain", "stiffness", "swelling", "back pain"],
            general: ["fever", "fatigue", "weight loss", "weight gain", "night sweats", "chills", "tired"],
            skin: ["rash", "itching", "discoloration", "lesions", "hives"],
            cardiovascular: ["chest pain", "palpitations", "irregular heartbeat", "swelling in legs"]
        };

        let detectedSymptoms = new Set();
        let chatHistory = [];

        document.getElementById('initialTime').textContent = formatTime(new Date());

        document.getElementById('sendBtn').addEventListener('click', sendMessage);
        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        document.getElementById('analyzeBtn').addEventListener('click', analyzeSymptoms);
        document.getElementById('saveBtn').addEventListener('click', saveReport);
        document.getElementById('clearBtn').addEventListener('click', clearChat);

      
        document.getElementById('messageInput').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        function formatTime(date) {
            return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        }

        function insertQuickMessage(message) {
            document.getElementById('messageInput').value = message;
            document.getElementById('messageInput').focus();
        }

        function detectSymptoms(text) {
            const lowerText = text.toLowerCase();
            let newSymptoms = [];

            for (const category in commonSymptoms) {
                for (const symptom of commonSymptoms[category]) {
                    if (lowerText.includes(symptom) && !detectedSymptoms.has(symptom)) {
                        detectedSymptoms.add(symptom);
                        newSymptoms.push(symptom);
                    }
                }
            }

            if (newSymptoms.length > 0) {
                updateSymptomsList();
                enableAnalysisButtons();
            }
        }

        function updateSymptomsList() {
            const container = document.getElementById('symptomsList');
            
            if (detectedSymptoms.size === 0) {
                container.innerHTML = '<p style="font-size: 12px; color: #888; font-style: italic;">No symptoms detected yet</p>';
                return;
            }

            container.innerHTML = '';
            detectedSymptoms.forEach(symptom => {
                const tag = document.createElement('span');
                tag.className = 'symptom-tag';
                tag.textContent = symptom;
                container.appendChild(tag);
            });
        }

        function enableAnalysisButtons() {
            document.getElementById('analyzeBtn').disabled = false;
            document.getElementById('saveBtn').disabled = false;
        }

        function addMessage(text, isUser = false) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;

            const avatarDiv = document.createElement('div');
            avatarDiv.className = `message-avatar ${isUser ? 'user-avatar' : 'bot-avatar'}`;
            avatarDiv.textContent = isUser ? 'üë§' : 'ü§ñ';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = formatMessageContent(text);

            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = formatTime(new Date());

            contentDiv.appendChild(timeDiv);
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(contentDiv);
            messagesContainer.appendChild(messageDiv);

            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            chatHistory.push({ role: isUser ? 'user' : 'assistant', content: text, time: new Date() });
        }

        function formatMessageContent(text) {
            text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/\n/g, '<br>');
            
            if (text.includes('Symptom Summary') || text.includes('Possible Conditions')) {
                return formatAnalysisResponse(text);
            }
            
            return `<p>${text}</p>`;
        }

        function formatAnalysisResponse(text) {
            const sections = text.split(/(?=\d\.\s\*\*|#{1,3}\s)/);
            let html = '';

            sections.forEach(section => {
                if (section.trim()) {
                    html += `<div class="analysis-card">${section.trim().replace(/\n/g, '<br>')}</div>`;
                }
            });

            return html || `<p>${text}</p>`;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typingIndicator';

            typingDiv.innerHTML = `
                <div class="message-avatar bot-avatar">ü§ñ</div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;

            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message) return;

            addMessage(message, true);
            input.value = '';
            input.style.height = 'auto';

            detectSymptoms(message);

            
            showTypingIndicator();

            
            setTimeout(() => {
                removeTypingIndicator();
                const response = generateAIResponse(message);
                addMessage(response);
            }, 1500);
        }

        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('headache')) {
                return "I understand you're experiencing a headache. To help you better, I need to ask a few questions:\n\n1. On a scale of 1-10, how severe is the pain?\n2. When did it start?\n3. Is it a throbbing, sharp, or dull pain?\n4. Have you noticed any other symptoms like nausea, sensitivity to light, or visual disturbances?";
            } else if (lowerMessage.includes('fever')) {
                return "A fever can indicate various conditions. Let me gather more information:\n\n1. Have you measured your temperature? If so, what is it?\n2. How long have you had the fever?\n3. Are you experiencing any other symptoms like chills, body aches, cough, or sore throat?\n4. Have you been in contact with anyone who's been sick recently?";
            } else if (lowerMessage.includes('cough')) {
                return "I see you have a cough. To better understand your condition:\n\n1. Is it a dry cough or are you producing mucus?\n2. How long have you had this cough?\n3. Is it worse at certain times of the day?\n4. Do you have any other symptoms like fever, shortness of breath, or chest pain?";
            } else {
                return "Thank you for sharing that information. Could you provide more details about your symptoms? For example:\n\n‚Ä¢ When did they start?\n‚Ä¢ How severe are they (on a scale of 1-10)?\n‚Ä¢ Have you noticed anything that makes them better or worse?\n‚Ä¢ Are there any other symptoms you're experiencing?";
            }
        }

        function getPatientInfo() {
            return {
                age: document.getElementById('age').value || 'Not provided',
                gender: document.getElementById('gender').value || 'Not provided',
                conditions: document.getElementById('conditions').value || 'None',
                medications: document.getElementById('medications').value || 'None',
                allergies: document.getElementById('allergies').value || 'None'
            };
        }

        function analyzeSymptoms() {
            if (detectedSymptoms.size === 0) {
                alert('No symptoms detected yet. Please describe your symptoms in the chat.');
                return;
            }

            const patientInfo = getPatientInfo();
            const symptomsArray = Array.from(detectedSymptoms);

            showTypingIndicator();

            setTimeout(() => {
                removeTypingIndicator();
                
                const analysis = `**COMPREHENSIVE SYMPTOM ANALYSIS**

**Symptom Summary:**
Detected symptoms: ${symptomsArray.join(', ')}

**Patient Information:**
‚Ä¢ Age: ${patientInfo.age}
‚Ä¢ Gender: ${patientInfo.gender}
‚Ä¢ Existing Conditions: ${patientInfo.conditions}
‚Ä¢ Current Medications: ${patientInfo.medications}
‚Ä¢ Allergies: ${patientInfo.allergies}

**Possible Conditions:**
Based on the symptoms you've described, here are some possibilities (from most to least likely):

1. **Common Cold/Upper Respiratory Infection** - Most likely if you have multiple respiratory symptoms
2. **Viral Infection** - Especially if accompanied by fever and fatigue
3. **Allergic Reaction** - If symptoms are seasonal or environmental

**Recommendations:**
‚Ä¢ Monitor your symptoms closely for the next 24-48 hours
‚Ä¢ Stay hydrated and get adequate rest
‚Ä¢ Take over-the-counter pain relievers if needed (following package directions)
‚Ä¢ Keep a symptom diary noting any changes

**Red Flags to Watch For:**
‚ö†Ô∏è Difficulty breathing or shortness of breath
‚ö†Ô∏è Chest pain or pressure
‚ö†Ô∏è High fever (>103¬∞F/39.4¬∞C) that doesn't respond to medication
‚ö†Ô∏è Confusion or altered mental state
‚ö†Ô∏è Persistent vomiting or severe dehydration

**When to Seek Emergency Care:**
Seek immediate medical attention if you experience:
‚Ä¢ Severe difficulty breathing
‚Ä¢ Chest pain or pressure lasting more than a few minutes
‚Ä¢ Sudden severe headache
‚Ä¢ Loss of consciousness
‚Ä¢ Seizures

**Important:** This is an AI-generated analysis and NOT a medical diagnosis. Please consult a healthcare professional for proper evaluation and treatment.`;

                addMessage(analysis);
            }, 2000);
        }

        function saveReport() {
            const patientInfo = getPatientInfo();
            const symptomsArray = Array.from(detectedSymptoms);
            const timestamp = new Date().toLocaleString();

            let report = `MEDICAL CONSULTATION REPORT
${'='.repeat(60)}
Date: ${timestamp}
${'='.repeat(60)}

PATIENT INFORMATION
${'-'.repeat(60)}
Age: ${patientInfo.age}
Gender: ${patientInfo.gender}
Existing Conditions: ${patientInfo.conditions}
Current Medications: ${patientInfo.medications}
Allergies: ${patientInfo.allergies}

${'='.repeat(60)}
REPORTED SYMPTOMS
${'-'.repeat(60)}
${symptomsArray.map((s, i) => `${i + 1}. ${s}`).join('\n')}

${'='.repeat(60)}
CONVERSATION HISTORY
${'-'.repeat(60)}
${chatHistory.map(msg => `[${formatTime(msg.time)}] ${msg.role.toUpperCase()}: ${msg.content}`).join('\n\n')}

${'='.repeat(60)}
DISCLAIMER
${'-'.repeat(60)}
This report is generated by an AI assistant and is NOT a
medical diagnosis. Please consult a qualified healthcare
professional for proper diagnosis and treatment.
${'='.repeat(60)}
`;

            // Create and download the file
            const blob = new Blob([report], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `medical_report_${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);

            addMessage('‚úÖ Report has been saved and downloaded successfully!');
        }

        function clearChat() {
            if (confirm('Are you sure you want to clear the chat history?')) {
                const messagesContainer = document.getElementById('chatMessages');
                messagesContainer.innerHTML = `
                    <div class="message bot">
                        <div class="message-avatar bot-avatar">ü§ñ</div>
                        <div class="message-content">
                            <p>Hello! I'm your AI medical assistant. I'm here to help you understand your symptoms and provide health information.</p>
                            <p style="margin-top: 8px;">Please describe your main symptoms or concerns, and I'll ask follow-up questions to better understand your situation.</p>
                            <div class="message-time">${formatTime(new Date())}</div>
                        </div>
                    </div>
                `;
                
                detectedSymptoms.clear();
                chatHistory = [];
                updateSymptomsList();
                document.getElementById('analyzeBtn').disabled = true;
                document.getElementById('saveBtn').disabled = true;
            }
        }
    </script>
</body>
</html>
