<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediSync AI - Advanced Medical Chatbot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .chat-container {
            width: 100%;
            max-width: 480px;
            height: 720px;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .ai-badge {
            position: relative;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            backdrop-filter: blur(10px);
        }

        .ai-pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(1.4);
                opacity: 0;
            }
        }

        .header-info h1 {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-info p {
            font-size: 13px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ai-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(74, 222, 128, 0.3);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: #4ade80;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Messages */
        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: linear-gradient(to bottom, #f9fafb, #ffffff);
        }

        .messages::-webkit-scrollbar {
            width: 6px;
        }

        .messages::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        .message {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .bot .avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .user .avatar {
            background: #334155;
            color: white;
        }

        .bubble {
            max-width: 75%;
            padding: 14px 18px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.6;
        }

        .bot .bubble {
            background: white;
            color: #1f2937;
            border: 1px solid #e5e7eb;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .user .bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .time {
            font-size: 11px;
            opacity: 0.6;
            margin-top: 6px;
        }

        /* AI Thinking */
        .thinking {
            display: none;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .thinking.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .thinking-bubble {
            background: white;
            border: 1px solid #e5e7eb;
            padding: 14px 18px;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .thinking-text {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
        }

        .thinking-dots {
            display: flex;
            gap: 4px;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            animation: bounce 1.4s infinite;
        }

        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes bounce {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.7;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Alert Badges */
        .alert {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            margin: 8px 0;
        }

        .alert-emergency {
            background: #fee2e2;
            color: #dc2626;
            border: 1px solid #fca5a5;
        }

        .alert-urgent {
            background: #fef3c7;
            color: #d97706;
            border: 1px solid #fcd34d;
        }

        .alert-routine {
            background: #d1fae5;
            color: #059669;
            border: 1px solid #6ee7b7;
        }

        /* Input */
        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e5e7eb;
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 6px;
            transition: all 0.3s;
        }

        .input-wrapper:focus-within {
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        #userInput {
            flex: 1;
            background: transparent;
            border: none;
            padding: 10px 14px;
            font-size: 15px;
            outline: none;
            color: #1f2937;
        }

        #userInput::placeholder {
            color: #9ca3af;
        }

        .send-btn {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .send-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .send-btn:active {
            transform: translateY(0);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Suggestions */
        .suggestions {
            padding: 16px 20px;
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 8px;
            overflow-x: auto;
        }

        .suggestions::-webkit-scrollbar {
            height: 4px;
        }

        .suggestion {
            padding: 8px 16px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            font-size: 13px;
            color: #374151;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s;
        }

        .suggestion:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        /* Disclaimer */
        .disclaimer {
            padding: 12px 20px;
            background: #fef3c7;
            border-top: 1px solid #fcd34d;
            font-size: 11px;
            color: #92400e;
            text-align: center;
        }

        .disclaimer strong {
            color: #78350f;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <div class="header">
            <div class="ai-badge">
                <div class="ai-pulse"></div>
                ü§ñ
            </div>
            <div class="header-info">
                <h1>MediSync AI Assistant</h1>
                <p>
                    <span class="ai-status">
                        <span class="status-dot"></span>
                        AI Powered by Medisync
                    </span>
                </p>
            </div>
        </div>

        <!-- Suggestions -->
        <div class="suggestions">
            <div class="suggestion" onclick="quickSend('I have a severe headache and feel dizzy')">
                üò£ Headache & Dizziness
            </div>
            <div class="suggestion" onclick="quickSend('I have chest pain and shortness of breath')">
                üíî Chest Pain
            </div>
            <div class="suggestion" onclick="quickSend('I have fever, cough, and body aches')">
                ü§í Fever & Cough
            </div>
            <div class="suggestion" onclick="quickSend('I have stomach pain and nausea')">
                ü§¢ Stomach Issues
            </div>
        </div>

        <!-- Messages -->
        <div class="messages" id="messages">
            <div class="message bot">
                <div class="avatar">ü§ñ</div>
                <div>
                    <div class="bubble">
                        <strong>üëã Hello! I'm your AI Medical Assistant</strong><br><br>
                        I'm powered by advanced AI to analyze your symptoms and provide accurate health recommendations.<br><br>
                        <strong>Please describe your symptoms in detail:</strong><br>
                        ‚Ä¢ What symptoms are you experiencing?<br>
                        ‚Ä¢ How long have you had them?<br>
                        ‚Ä¢ How severe are they (mild/moderate/severe)?<br>
                        ‚Ä¢ Any other relevant information?<br><br>
                        The more details you provide, the better I can help! üè•
                    </div>
                    <div class="time">Just now</div>
                </div>
            </div>
        </div>

        <!-- Thinking Indicator -->
        <div class="thinking" id="thinking">
            <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">ü§ñ</div>
            <div class="thinking-bubble">
                <div class="thinking-text">AI is analyzing your symptoms...</div>
                <div class="thinking-dots">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
            </div>
        </div>

        <!-- Input -->
        <div class="input-area">
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="userInput" 
                    placeholder="Describe your symptoms in detail..."
                    autocomplete="off"
                >
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
            <strong>‚öïÔ∏è Medical Disclaimer:</strong> This AI provides preliminary health information only. Always consult a qualified healthcare professional for diagnosis and treatment.
        </div>
    </div>

    <script>
        const messages = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const thinking = document.getElementById('thinking');

        // Simulated AI Analysis (Replace with actual API call)
        async function analyzeSymptoms(symptoms) {
            // This is a sophisticated simulation
            // In production, replace with actual Claude API call
            
            const symptomsLower = symptoms.toLowerCase();
            
            // Advanced pattern matching with AI-like reasoning
            const analysis = {
                headache: {
                    keywords: ['headache', 'migraine', 'head pain', 'dizzy', 'dizziness', 'vertigo'],
                    response: {
                        condition: 'Tension Headache / Migraine',
                        confidence: 'High (85%)',
                        specialist: 'Neurologist',
                        urgency: 'urgent',
                        reasoning: 'Based on your symptoms of headache and dizziness, this could indicate a migraine, tension headache, or inner ear problem. Dizziness combined with headache warrants medical evaluation.',
                        recommendations: [
                            'Rest in a dark, quiet room',
                            'Stay well hydrated with water',
                            'Avoid bright lights and loud noises',
                            'Track your headache triggers (foods, stress, sleep)',
                            'Consider over-the-counter pain relievers if not contraindicated',
                            'Schedule appointment within 24-48 hours if symptoms persist'
                        ],
                        warning: 'Seek immediate care if you experience: sudden severe headache, confusion, vision changes, difficulty speaking, or weakness.',
                        possibleCauses: [
                            'Migraine (most likely)',
                            'Tension headache',
                            'Dehydration',
                            'Inner ear disorder',
                            'Medication side effects'
                        ]
                    }
                },
                cardiac: {
                    keywords: ['chest pain', 'heart pain', 'chest pressure', 'shortness of breath', 'breathless', 'palpitation', 'heart racing'],
                    response: {
                        condition: 'Possible Cardiac Event',
                        confidence: 'High (90%)',
                        specialist: 'Cardiologist / Emergency Care',
                        urgency: 'emergency',
                        reasoning: 'Chest pain combined with shortness of breath are serious symptoms that could indicate a heart attack, angina, or other cardiac emergency. Immediate medical evaluation is critical.',
                        recommendations: [
                            'üö® CALL EMERGENCY SERVICES (911) IMMEDIATELY',
                            'Sit down and try to remain calm',
                            'Chew aspirin if available and not allergic (325mg)',
                            'Loosen tight clothing',
                            'Do NOT drive yourself to the hospital',
                            'Have someone stay with you until help arrives'
                        ],
                        warning: 'This is a potential MEDICAL EMERGENCY. Do not delay seeking immediate professional medical care.',
                        possibleCauses: [
                            'Myocardial infarction (heart attack) - URGENT',
                            'Angina pectoris',
                            'Pulmonary embolism',
                            'Anxiety attack',
                            'Gastroesophageal reflux (GERD)'
                        ]
                    }
                },
                respiratory: {
                    keywords: ['fever', 'cough', 'cold', 'flu', 'sore throat', 'runny nose', 'congestion', 'body ache'],
                    response: {
                        condition: 'Upper Respiratory Infection (URI)',
                        confidence: 'High (88%)',
                        specialist: 'General Physician / Family Doctor',
                        urgency: 'routine',
                        reasoning: 'Your symptoms of fever, cough, and body aches are consistent with a viral upper respiratory infection, possibly influenza or common cold. These are typically self-limiting but require monitoring.',
                        recommendations: [
                            'Get plenty of rest (7-9 hours of sleep)',
                            'Drink fluids regularly (water, warm tea, soup)',
                            'Use over-the-counter fever reducers (acetaminophen/ibuprofen)',
                            'Gargle with warm salt water for sore throat',
                            'Use a humidifier to ease congestion',
                            'Monitor temperature regularly',
                            'Isolate from others to prevent spread',
                            'Schedule appointment if symptoms worsen or persist beyond 7-10 days'
                        ],
                        warning: 'Seek medical care if: fever exceeds 103¬∞F (39.4¬∞C), difficulty breathing, chest pain, or symptoms last more than 10 days.',
                        possibleCauses: [
                            'Influenza (flu) - most likely',
                            'Common cold (rhinovirus)',
                            'COVID-19',
                            'Respiratory syncytial virus (RSV)',
                            'Streptococcal pharyngitis (strep throat)'
                        ]
                    }
                },
                gastrointestinal: {
                    keywords: ['stomach pain', 'abdominal pain', 'nausea', 'vomiting', 'diarrhea', 'stomach ache', 'belly pain'],
                    response: {
                        condition: 'Acute Gastroenteritis / GI Distress',
                        confidence: 'High (82%)',
                        specialist: 'Gastroenterologist / General Physician',
                        urgency: 'urgent',
                        reasoning: 'Stomach pain with nausea suggests gastroenteritis (stomach flu), food poisoning, or other gastrointestinal issues. Dehydration is a primary concern with these symptoms.',
                        recommendations: [
                            'Stay hydrated with clear fluids (water, electrolyte drinks)',
                            'Avoid solid foods for first few hours',
                            'Gradually reintroduce bland foods (BRAT diet: bananas, rice, applesauce, toast)',
                            'Avoid dairy, caffeine, alcohol, and fatty foods',
                            'Rest and avoid strenuous activity',
                            'Monitor for signs of dehydration (dark urine, dizziness)',
                            'Consider over-the-counter anti-nausea medication',
                            'See doctor if symptoms persist beyond 48 hours'
                        ],
                        warning: 'Seek immediate care if: severe abdominal pain, blood in vomit or stool, high fever, signs of dehydration, or inability to keep fluids down.',
                        possibleCauses: [
                            'Viral gastroenteritis (most common)',
                            'Food poisoning',
                            'Bacterial infection',
                            'Indigestion',
                            'Irritable bowel syndrome (IBS)',
                            'Appendicitis (if pain in lower right abdomen)'
                        ]
                    }
                },
                musculoskeletal: {
                    keywords: ['back pain', 'joint pain', 'muscle pain', 'arthritis', 'sprain', 'knee pain', 'shoulder pain'],
                    response: {
                        condition: 'Musculoskeletal Pain / Strain',
                        confidence: 'Medium (75%)',
                        specialist: 'Orthopedic Surgeon / Physical Therapist',
                        urgency: 'routine',
                        reasoning: 'Your symptoms suggest musculoskeletal pain, which could be from overuse, strain, poor posture, or degenerative changes. Most cases improve with conservative treatment.',
                        recommendations: [
                            'Apply ice for first 48 hours (20 mins every 2-3 hours)',
                            'After 48 hours, use heat therapy',
                            'Take anti-inflammatory medication (ibuprofen) if not contraindicated',
                            'Avoid activities that worsen pain',
                            'Gentle stretching and range-of-motion exercises',
                            'Maintain good posture',
                            'Consider physical therapy',
                            'Use supportive devices if needed (brace, ergonomic chair)'
                        ],
                        warning: 'Seek medical care if: severe pain, swelling, inability to move joint, numbness/tingling, or pain following injury.',
                        possibleCauses: [
                            'Muscle strain or sprain',
                            'Poor posture or ergonomics',
                            'Osteoarthritis',
                            'Herniated disc (if back pain)',
                            'Tendinitis',
                            'Bursitis'
                        ]
                    }
                }
            };

            // Find matching pattern
            for (const [key, pattern] of Object.entries(analysis)) {
                if (pattern.keywords.some(keyword => symptomsLower.includes(keyword))) {
                    return pattern.response;
                }
            }

            // Default response for unmatched symptoms
            return {
                condition: 'Symptoms Require Professional Evaluation',
                confidence: 'Unable to determine',
                specialist: 'General Physician',
                urgency: 'routine',
                reasoning: 'Your symptoms don\'t match common patterns in my database. A comprehensive medical evaluation is recommended to properly diagnose your condition.',
                recommendations: [
                    'Schedule an appointment with your primary care physician',
                    'Prepare a detailed list of all symptoms, their duration, and severity',
                    'Note any medications you\'re currently taking',
                    'Document when symptoms are better or worse',
                    'Track any triggers you\'ve noticed'
                ],
                warning: 'If you experience severe symptoms, high fever, difficulty breathing, or other concerning signs, seek immediate medical care.',
                possibleCauses: [
                    'Requires professional medical evaluation',
                    'Multiple potential causes',
                    'May need diagnostic testing'
                ]
            };
        }

        function formatAIResponse(analysis) {
            const urgencyClass = analysis.urgency === 'emergency' ? 'alert-emergency' : 
                                analysis.urgency === 'urgent' ? 'alert-urgent' : 'alert-routine';
            
            const urgencyIcon = analysis.urgency === 'emergency' ? 'üö®' : 
                               analysis.urgency === 'urgent' ? '‚ö°' : '‚úÖ';
            
            const urgencyText = analysis.urgency === 'emergency' ? 'EMERGENCY - IMMEDIATE ACTION REQUIRED' : 
                               analysis.urgency === 'urgent' ? 'URGENT CARE RECOMMENDED' : 'ROUTINE CONSULTATION';

            return `
                <strong>üî¨ AI Analysis Complete</strong><br><br>
                
                <div class="alert ${urgencyClass}">
                    ${urgencyIcon} ${urgencyText}
                </div><br>
                
                <strong>üìã Diagnosis:</strong> ${analysis.condition}<br>
                <strong>üéØ Confidence Level:</strong> ${analysis.confidence}<br>
                <strong>üë®‚Äç‚öïÔ∏è Recommended Specialist:</strong> ${analysis.specialist}<br><br>
                
                <strong>üß† AI Reasoning:</strong><br>
                ${analysis.reasoning}<br><br>
                
                <strong>üíä Possible Causes:</strong><br>
                ${analysis.possibleCauses.map((cause, i) => `${i + 1}. ${cause}`).join('<br>')}<br><br>
                
                <strong>üí° Recommendations:</strong><br>
                ${analysis.recommendations.map((rec, i) => `${i + 1}. ${rec}`).join('<br>')}<br><br>
                
                <strong>‚ö†Ô∏è Warning Signs:</strong><br>
                ${analysis.warning}<br><br>
                
                <em style="font-size: 12px; color: #6b7280;">
                    This analysis is AI-generated and should not replace professional medical advice. 
                    Please consult with a qualified healthcare provider for proper diagnosis and treatment.
                </em>
            `;
        }

        function addMessage(text, isUser = false) {
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const div = document.createElement('div');
            div.className = `message ${isUser ? 'user' : 'bot'}`;
            div.innerHTML = `
                <div class="avatar">${isUser ? 'üë§' : 'ü§ñ'}</div>
                <div>
                    <div class="bubble">${text}</div>
                    <div class="time">${time}</div>
                </div>
            `;
            messages.appendChild(div);
            messages.scrollTop = messages.scrollHeight;
        }

        function showThinking() {
            thinking.classList.add('active');
            messages.scrollTop = messages.scrollHeight;
        }

        function hideThinking() {
            thinking.classList.remove('active');
        }

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            // Disable input
            userInput.disabled = true;
            sendBtn.disabled = true;

            // Add user message
            addMessage(text, true);
            userInput.value = '';

            // Show AI thinking
            showThinking();

            // Simulate AI processing time (1.5-3 seconds for realism)
            const processingTime = 1500 + Math.random() * 1500;
            
            setTimeout(async () => {
                // Analyze symptoms
                const analysis = await analyzeSymptoms(text);
                const response = formatAIResponse(analysis);

                // Hide thinking and show response
                hideThinking();
                addMessage(response);

                // Re-enable input
                userInput.disabled = false;
                sendBtn.disabled = false;
                userInput.focus();
            }, processingTime);
        }

        function quickSend(text) {
            userInput.value = text;
            sendMessage();
        }

        // Enter key to send
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Enable/disable send button
        userInput.addEventListener('input', () => {
            sendBtn.disabled = !userInput.value.trim();
        });
    </script>
</body>
</html>
